{
    "format_version": "1.17",
    "minecraft:npc_dialogue": {
        "scenes": [{
            "scene_tag": "inicial",
            "npc_name": "Lola",
            "text": "¡Hola! ¿En qué puedo ayudarte?",
            "on_open_commands": [
                "/scoreboard objectives add UsosNPC dummy",
                "/scoreboard players add @p UsosNPC 1",
                "/scoreboard objectives add TotalXP dummy",
                "/scoreboard players add @p TotalXP 0",
                "/scoreboard objectives add PagarXP dummy"
            ],
            "on_close_commands": [""],
            "buttons": [{
                "name": "Experiencia",
                "commands": ["/dialogue open @e[type=npc,r=7] @p comerciar_experiencia"]
            }, {
                "name": "Viajar",
                "commands": ["/dialogue open @e[type=npc,r=7] @p viajar"]
            }]
        }, {
            "scene_tag": "comerciar_experiencia",
            "npc_name": "Lola",
            "text": "Puedes guardar 15 niveles experiencia en objetos llamados Masa de experiencia. Estos objetos puedes volver a convertirlos en experiencia.",
            "on_open_commands": ["/scoreboard players set @p PagarXP 0","/execute @p[lm=15] ~ ~ ~ scoreboard players set @s PagarXP 1", "scoreboard objectives add TieneMasa dummy"],
            "on_close_commands": [""],
            "buttons": [{
                "name": "Guardar experiencia",
                "commands": [
                    "/execute @p[scores={PagarXP=0},r=4] ~ ~ ~ playsound random.break @s[r=4]",
                    "/execute @p[scores={PagarXP=0},r=4] ~ ~ ~ dialogue open @e[type=npc,r=7] @p masa_negada",
                    "/execute @p[scores={PagarXP=1},r=4] ~ ~ ~ give @s[r=4] appleplus:masa_de_experiencia 1",
                    "/execute @p[scores={PagarXP=1},r=4] ~ ~ ~ playsound random.levelup @s[r=4]",
                    "/execute @p[scores={PagarXP=1},r=4] ~ ~ ~ xp -15l @s[r=4]",
                    "/execute @p[scores={PagarXP=1},r=4] ~ ~ ~ dialogue open @e[type=npc,r=7] @p masa_recibida"
                ]
            }, {
                "name": "Cargar experiencia",
                "commands": [
                    "/execute @p[scores={TieneMasa=0},r=4] ~ ~ ~ playsound random.break @s[r=4]",
                    "/execute @p[scores={TieneMasa=0},r=4] ~ ~ ~ dialogue open @e[type=npc,r=7] @p xp_negada",
                    "/execute @p[scores={TieneMasa=1},r=4] ~ ~ ~ clear @p appleplus:masa_de_experiencia 0 1",
                    "/execute @p[scores={TieneMasa=1},r=4] ~ ~ ~ playsound random.levelup @s[r=4]",
                    "/execute @p[scores={TieneMasa=1},r=4] ~ ~ ~ xp 15l @s[r=4]",
                    "/execute @p[scores={TieneMasa=1},r=4] ~ ~ ~ dialogue open @e[type=npc,r=7] @p xp_recibida"
                ]
            }, {
                "name": "Volver",
                "commands": ["/dialogue open @e[type=npc,r=7] @p inicial"]
            }]
        }, {
            "scene_tag": "masa_recibida",
            "npc_name": "Lola",
            "text": "§l§2¡Has recibido una Masa de experiencia! §rGuárdala en un lugar seguro.",
            "on_open_commands": ["/scoreboard players add @p TotalXP 1"],
            "on_close_commands": [""],
            "buttons": [{
                "name": "Cerrar",
                "commands": ["*"]
            }, {
                "name": "Volver",
                "commands": ["/dialogue open @e[type=npc,r=7] @p comerciar_experiencia"]
            }]
        }, {
            "scene_tag": "masa_negada",
            "npc_name": "Lola",
            "text": "§l§4No tienes suficiente experiencia para guardar. §rRecuerda que necesitas 15 niveles de experiencia.",
            "on_open_commands": [""],
            "on_close_commands": [""],
            "buttons": [{
                "name": "Cerrar",
                "commands": ["*"]
            }, {
                "name": "Volver",
                "commands": ["/dialogue open @e[type=npc,r=7] @p comerciar_experiencia"]
            }]
        }, {
            "scene_tag": "xp_recibida",
            "npc_name": "Lola",
            "text": "§l§2¡Has recibido 15 niveles de experiencia!",
            "on_open_commands": ["/scoreboard players add @p TotalXP 1"],
            "on_close_commands": [""],
            "buttons": [{
                "name": "Cerrar",
                "commands": ["*"]
            }, {
                "name": "Volver",
                "commands": ["/dialogue open @e[type=npc,r=7] @p comerciar_experiencia"]
            }]
        }, {
            "scene_tag": "xp_negada",
            "npc_name": "Lola",
            "text": "§l§4No masas de experiencia para cargar. §rNecesitas una para cargar 15 niveles de experiencia.",
            "on_open_commands": [""],
            "on_close_commands": [""],
            "buttons": [{
                "name": "Cerrar",
                "commands": ["*"]
            }, {
                "name": "Volver",
                "commands": ["/dialogue open @e[type=npc,r=7] @p comerciar_experiencia"]
            }]
        }, {
            "scene_tag": "viajar",
            "npc_name": "Lola",
            "text": "Puedes viajar a estos destinos. Estaré actualizando los destinos con nuevos lugares descubiertos por ustedes.",
            "on_open_commands": [""],
            "on_close_commands": [""],
            "buttons": [{
                "name": "Spawn",
                "commands": ["/tp @p @e[type=hovertext:warp,name=kzjopw]"]
            }, {
                "name": "Desierto",
                "commands": ["/tp @p -1133 72 363"]
            }, {
                "name": "Volver",
                "commands": ["/dialogue open @e[type=npc,r=7] @p inicial"]
            }]
        }, {
            "scene_tag": "emergencia",
            "npc_name": "Lola",
            "text": "¿Tienes alguna emergencia? Yo te puedo ayudar. Elige lo que quieres que haga por tí. §l§4Recuerda que este objeto es de un sólo uso. §rSi no necesitas ayuda, cancela para regresarte tu §lInvocador de ayuda.",
            "on_open_commands": ["/scoreboard objectives add UsosEmergencia dummy", "/scoreboard players add @p UsosEmergencia 0"],
            "on_close_commands": ["/kill @s" ,"/effect @p clear"],
            "buttons": [{
                "name": "Llévame a casa",
                "commands": [
                    "/tp @p @e[type=hovertext:warp,name=kzjopw]",
                    "/title @p actionbar §a¡Has sido transportado a casa!",
                    "/particle minecraft:totem_particle ~ ~1 ~",
                    "/playsound random.levelup @p",
                    "/scoreboard players add @p UsosEmergencia 1"
                ]
            },{
                "name": "Dame comida",
                "commands": [
                    "/give @p cooked_porkchop 10",
                    "/title @p actionbar §a¡Has recibido alimento!",
                    "/particle minecraft:totem_particle ~ ~1 ~",
                    "/playsound random.levelup @p",
                    "/scoreboard players add @p UsosEmergencia 1"
                ]
            },{
                "name": "Kit de hierro",
                "commands": [
                    "/give @p iron_helmet",
                    "/give @p iron_chestplate",
                    "/give @p iron_leggings",
                    "/give @p iron_boots",
                    "/give @p iron_sword",
                    "/give @p iron_pickaxe",
                    "/title @p actionbar §a¡Has recibido tu kit de hierro!",
                    "/particle minecraft:totem_particle ~ ~1 ~",
                    "/playsound random.levelup @p",
                    "/scoreboard players add @p UsosEmergencia 1"
                ]
            },{
                "name": "Sáname",
                "commands": [
                    "/effect @p instant_health 5",
                    "/title @p actionbar §a¡Has sido sanado!",
                    "/particle minecraft:totem_particle ~ ~1 ~",
                    "/playsound random.levelup @p",
                    "/scoreboard players add @p UsosEmergencia 1"
                ]
            },{
                "name": "Mátame",
                "commands": [
                    "/kill @p",
                    "/scoreboard players add @p UsosEmergencia 1"
                ]
            },{
                "name": "Cancelar",
                "commands": [
                    "/give @p if:emergencia",
                    "/kill @s"
                ]
            }]
        }]
    }
}